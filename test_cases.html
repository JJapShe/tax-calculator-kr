<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìë™ì°¨ ì„¸ê¸ˆ ê³„ì‚°ê¸° í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-case {
            border: 1px solid #ddd;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            background: #f9f9f9;
        }
        .test-case.success {
            border-color: #4CAF50;
            background: #e8f5e8;
        }
        .test-case.error {
            border-color: #f44336;
            background: #ffeaea;
        }
        .test-case h3 {
            margin-top: 0;
            color: #333;
        }
        .test-input {
            margin: 5px 0;
            font-size: 14px;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
            background: #f0f0f0;
        }
        .success {
            color: #4CAF50;
        }
        .error {
            color: #f44336;
        }
        .run-tests-btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin: 20px 0;
        }
        .run-tests-btn:hover {
            background: #1976D2;
        }
        .progress {
            width: 100%;
            height: 20px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }
        .progress-bar {
            height: 100%;
            background: #4CAF50;
            transition: width 0.3s ease;
        }
        .summary {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .summary h2 {
            margin-top: 0;
            color: #1976D2;
        }
    </style>
</head>
<body>
    <h1>ğŸš— ìë™ì°¨ ì„¸ê¸ˆ ê³„ì‚°ê¸° í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤</h1>
    
    <div class="test-container">
        <button class="run-tests-btn" onclick="runAllTests()">ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
        
        <div class="progress">
            <div class="progress-bar" id="progressBar" style="width: 0%"></div>
        </div>
        
        <div class="summary" id="testSummary" style="display: none;">
            <h2>í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìš”ì•½</h2>
            <div id="summaryContent"></div>
        </div>
    </div>

    <div id="testResults"></div>

    <script>
        // ë©”ì¸ ê³„ì‚°ê¸° í´ë˜ìŠ¤ import (ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” main.jsì—ì„œ ê°€ì ¸ì˜´)
        let taxCalculator;
        
        // í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì •ì˜
        const testCases = [
            {
                name: "ê¸°ë³¸ ìŠ¹ìš©ì°¨ ì„¸ê¸ˆ ê³„ì‚°",
                input: {
                    carName: "ì•„ë°˜ë–¼",
                    carPrice: 30000000,
                    displacement: 1600,
                    carAge: 0,
                    vehicleType: "passenger",
                    vehicleUse: "private",
                    fuelType: "gasoline",
                    seatingCapacity: "1-6",
                    discounts: {
                        individualTaxDiscount: false,
                        oldCar: false,
                        disabled: false,
                        veteran: false,
                        multiChild2: false,
                        multiChild3: false
                    }
                },
                expected: {
                    individualTaxExists: true,
                    acquisitionTaxExists: true,
                    annualTaxExists: true,
                    totalTaxExists: true
                },
                description: "3000ë§Œì› ì•„ë°˜ë–¼ 1600cc ì‹ ì°¨ ê¸°ë³¸ ì„¸ê¸ˆ ê³„ì‚°"
            },
            {
                name: "ì „ê¸°ì°¨ ìë™ ê°ë©´ ì ìš©",
                input: {
                    carName: "ì•„ì´ì˜¤ë‹‰ 6",
                    carPrice: 50000000,
                    displacement: 0,
                    carAge: 0,
                    vehicleType: "passenger",
                    vehicleUse: "private",
                    fuelType: "electric",
                    seatingCapacity: "1-6",
                    discounts: {
                        individualTaxDiscount: true, // ìë™ ì ìš©
                        oldCar: false,
                        disabled: false,
                        veteran: false,
                        multiChild2: false,
                        multiChild3: false
                    }
                },
                expected: {
                    individualTaxReduced: true,
                    acquisitionTaxReduced: true,
                    annualTaxFlat: true, // ì „ê¸°ì°¨ ì •ì•¡
                    electricDiscountApplied: true
                },
                description: "5000ë§Œì› ì „ê¸°ì°¨ ìë™ ê°ë©´ ì ìš© (ê°œë³„ì†Œë¹„ì„¸ 300ë§Œì›, ì·¨ë“ì„¸ 140ë§Œì› í•œë„)"
            },
            {
                name: "ìˆ˜ì†Œì „ê¸°ì°¨ ìë™ ê°ë©´ ì ìš©",
                input: {
                    carName: "ë„¥ì˜",
                    carPrice: 70000000,
                    displacement: 0,
                    carAge: 0,
                    vehicleType: "passenger",
                    vehicleUse: "private",
                    fuelType: "hydrogen",
                    seatingCapacity: "1-6",
                    discounts: {
                        individualTaxDiscount: true, // ìë™ ì ìš©
                        oldCar: false,
                        disabled: false,
                        veteran: false,
                        multiChild2: false,
                        multiChild3: false
                    }
                },
                expected: {
                    individualTaxReduced: true,
                    acquisitionTaxReduced: true,
                    annualTaxFlat: true, // ìˆ˜ì†Œì „ê¸°ì°¨ ì •ì•¡
                    hydrogenDiscountApplied: true
                },
                description: "7000ë§Œì› ìˆ˜ì†Œì „ê¸°ì°¨ ìë™ ê°ë©´ ì ìš© (ê°œë³„ì†Œë¹„ì„¸ 400ë§Œì›, ì·¨ë“ì„¸ 140ë§Œì› í•œë„)"
            },
            {
                name: "ê²½ì°¨ ìë™ ê°ë©´ ì ìš©",
                input: {
                    carName: "ëª¨ë‹",
                    carPrice: 15000000,
                    displacement: 800,
                    carAge: 0,
                    vehicleType: "compact",
                    vehicleUse: "private",
                    fuelType: "gasoline",
                    seatingCapacity: "1-6",
                    discounts: {
                        individualTaxDiscount: true, // ìë™ ì ìš©
                        oldCar: false,
                        disabled: false,
                        veteran: false,
                        multiChild2: false,
                        multiChild3: false
                    }
                },
                expected: {
                    individualTaxZero: true, // ê²½ì°¨ ë©´ì œ
                    acquisitionTaxZero: true, // 1875ë§Œì› ì´í•˜ ë©´ì œ
                    compactDiscountApplied: true
                },
                description: "1500ë§Œì› ê²½ì°¨ ìë™ ê°ë©´ ì ìš© (ê°œë³„ì†Œë¹„ì„¸ ë©´ì œ, ì·¨ë“ì„¸ ë©´ì œ)"
            },
            {
                name: "ì¥ì• ì¸ ë©´ì œ ì ìš©",
                input: {
                    carName: "ì˜ë‚˜íƒ€",
                    carPrice: 40000000,
                    displacement: 2000,
                    carAge: 0,
                    vehicleType: "passenger",
                    vehicleUse: "private",
                    fuelType: "gasoline",
                    seatingCapacity: "1-6",
                    discounts: {
                        individualTaxDiscount: false,
                        oldCar: false,
                        disabled: true,
                        veteran: false,
                        multiChild2: false,
                        multiChild3: false
                    }
                },
                expected: {
                    individualTaxReduced: true, // ì¥ì• ì¸ 500ë§Œì› í•œë„
                    acquisitionTaxZero: true, // ì¥ì• ì¸ ë©´ì œ
                    disabledExemptionApplied: true
                },
                description: "4000ë§Œì› ìŠ¹ìš©ì°¨ ì¥ì• ì¸ ë©´ì œ ì ìš© (ê°œë³„ì†Œë¹„ì„¸ 500ë§Œì› í•œë„, ì·¨ë“ì„¸ ë©´ì œ)"
            },
            {
                name: "êµ­ê°€ìœ ê³µì ë©´ì œ ì ìš©",
                input: {
                    carName: "ê·¸ëœì ¸",
                    carPrice: 60000000,
                    displacement: 3000,
                    carAge: 0,
                    vehicleType: "passenger",
                    vehicleUse: "private",
                    fuelType: "gasoline",
                    seatingCapacity: "1-6",
                    discounts: {
                        individualTaxDiscount: false,
                        oldCar: false,
                        disabled: false,
                        veteran: true,
                        multiChild2: false,
                        multiChild3: false
                    }
                },
                expected: {
                    acquisitionTaxZero: true, // êµ­ê°€ìœ ê³µì ë©´ì œ
                    veteranExemptionApplied: true
                },
                description: "6000ë§Œì› ëŒ€í˜• ìŠ¹ìš©ì°¨ êµ­ê°€ìœ ê³µì ë©´ì œ ì ìš© (ì·¨ë“ì„¸ ë©´ì œ)"
            },
            {
                name: "ë‹¤ìë…€ 3ëª… ê°ë©´ ì ìš©",
                input: {
                    carName: "ì¹´ë‹ˆë°œ",
                    carPrice: 45000000,
                    displacement: 3500,
                    carAge: 0,
                    vehicleType: "van",
                    vehicleUse: "private",
                    fuelType: "gasoline",
                    seatingCapacity: "7-10",
                    discounts: {
                        individualTaxDiscount: false,
                        oldCar: false,
                        disabled: false,
                        veteran: false,
                        multiChild2: false,
                        multiChild3: true
                    }
                },
                expected: {
                    acquisitionTaxReduced: true, // ë‹¤ìë…€ ê°ë©´
                    multiChildDiscountApplied: true
                },
                description: "4500ë§Œì› ìŠ¹í•©ì°¨ ë‹¤ìë…€ 3ëª… ê°ë©´ ì ìš© (7ì¸ìŠ¹ ì´ìƒ 100% ê°ë©´)"
            },
            {
                name: "ë…¸í›„ì°¨ëŸ‰ ê°ë©´ ì ìš©",
                input: {
                    carName: "êµ¬í˜• ì†Œë‚˜íƒ€",
                    carPrice: 25000000,
                    displacement: 2000,
                    carAge: 6,
                    vehicleType: "passenger",
                    vehicleUse: "private",
                    fuelType: "gasoline",
                    seatingCapacity: "1-6",
                    discounts: {
                        individualTaxDiscount: false,
                        oldCar: true,
                        disabled: false,
                        veteran: false,
                        multiChild2: false,
                        multiChild3: false
                    }
                },
                expected: {
                    individualTaxReduced: true, // ë…¸í›„ì°¨ëŸ‰ 70% ê°ë©´
                    acquisitionTaxReduced: true, // ë…¸í›„ì°¨ëŸ‰ 30ë§Œì› ê°ë©´
                    annualTaxReduced: true, // 6ë…„ì°¨ 30% í• ì¸
                    oldCarDiscountApplied: true
                },
                description: "2500ë§Œì› 6ë…„ì°¨ ë…¸í›„ì°¨ëŸ‰ ê°ë©´ ì ìš© (ê°œë³„ì†Œë¹„ì„¸ 70% ê°ë©´, ì·¨ë“ì„¸ 30ë§Œì› ê°ë©´)"
            },
            {
                name: "1000cc ì´í•˜ ë¹„ê³¼ì„¸",
                input: {
                    carName: "ë ˆì´",
                    carPrice: 18000000,
                    displacement: 1000,
                    carAge: 0,
                    vehicleType: "passenger",
                    vehicleUse: "private",
                    fuelType: "gasoline",
                    seatingCapacity: "1-6",
                    discounts: {
                        individualTaxDiscount: false,
                        oldCar: false,
                        disabled: false,
                        veteran: false,
                        multiChild2: false,
                        multiChild3: false
                    }
                },
                expected: {
                    individualTaxZero: true, // 1000cc ì´í•˜ ë¹„ê³¼ì„¸
                    smallEngineExemptionApplied: true
                },
                description: "1800ë§Œì› 1000cc ì†Œí˜•ì°¨ ë¹„ê³¼ì„¸ ì ìš© (ê°œë³„ì†Œë¹„ì„¸ ë©´ì œ)"
            },
            {
                name: "ì´ë¥œì°¨ ì„¸ê¸ˆ ê³„ì‚°",
                input: {
                    carName: "ëŒ€í˜• ì˜¤í† ë°”ì´",
                    carPrice: 5000000,
                    displacement: 300,
                    carAge: 0,
                    vehicleType: "motorcycle",
                    vehicleUse: "private",
                    fuelType: "gasoline",
                    seatingCapacity: "1-6",
                    discounts: {
                        individualTaxDiscount: false,
                        oldCar: false,
                        disabled: false,
                        veteran: false,
                        multiChild2: false,
                        multiChild3: false
                    }
                },
                expected: {
                    individualTaxZero: true, // ì´ë¥œì°¨ ë¹„ê³¼ì„¸
                    acquisitionTaxRate: 0.05, // 125cc ì´ˆê³¼ 5%
                    registrationLicenseIncluded: true, // ë“±ë¡ë©´í—ˆì„¸ í¬í•¨
                    motorcycleRulesApplied: true
                },
                description: "500ë§Œì› 300cc ì´ë¥œì°¨ ì„¸ê¸ˆ ê³„ì‚° (ê°œë³„ì†Œë¹„ì„¸ ë¹„ê³¼ì„¸, ì·¨ë“ì„¸ 5% + ë“±ë¡ë©´í—ˆì„¸)"
            },
            {
                name: "ê°œë³„ì†Œë¹„ì„¸ ê°ë©´ í•œë„ í…ŒìŠ¤íŠ¸",
                input: {
                    carName: "ê³ ê¸‰ ì „ê¸°ì°¨",
                    carPrice: 200000000,
                    displacement: 0,
                    carAge: 0,
                    vehicleType: "passenger",
                    vehicleUse: "private",
                    fuelType: "electric",
                    seatingCapacity: "1-6",
                    discounts: {
                        individualTaxDiscount: true, // ìë™ ì ìš©
                        oldCar: false,
                        disabled: false,
                        veteran: false,
                        multiChild2: false,
                        multiChild3: false
                    }
                },
                expected: {
                    individualTaxHasLimit: true, // 300ë§Œì› í•œë„ ì ìš©
                    electricDiscountLimited: true
                },
                description: "2ì–µì› ê³ ê¸‰ ì „ê¸°ì°¨ ê°ë©´ í•œë„ í…ŒìŠ¤íŠ¸ (ê°œë³„ì†Œë¹„ì„¸ 300ë§Œì› í•œë„ ì ìš©)"
            }
        ];

        let currentTestIndex = 0;
        let testResults = [];

        // í…ŒìŠ¤íŠ¸ ì‹¤í–‰ í•¨ìˆ˜
        async function runAllTests() {
            console.log('=== ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹œì‘ ===');
            
            // ì´ˆê¸°í™”
            currentTestIndex = 0;
            testResults = [];
            document.getElementById('testResults').innerHTML = '';
            document.getElementById('testSummary').style.display = 'none';
            
            // ë©”ì¸ ê³„ì‚°ê¸° ë¡œë“œ í™•ì¸
            if (typeof TaxCalculator === 'undefined') {
                console.error('TaxCalculator í´ë˜ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. main.jsê°€ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.');
                return;
            }
            
            taxCalculator = new TaxCalculator();
            
            // ê° í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‹¤í–‰
            for (let i = 0; i < testCases.length; i++) {
                currentTestIndex = i;
                updateProgressBar();
                
                const testCase = testCases[i];
                const result = await runSingleTest(testCase);
                testResults.push(result);
                
                displayTestResult(result);
                
                // ì ì‹œ ëŒ€ê¸° (ì‹œê°ì  íš¨ê³¼)
                await new Promise(resolve => setTimeout(resolve, 100));
            }
            
            // í…ŒìŠ¤íŠ¸ ì™„ë£Œ
            updateProgressBar();
            displaySummary();
            
            console.log('=== ì „ì²´ í…ŒìŠ¤íŠ¸ ì™„ë£Œ ===');
        }

        // ë‹¨ì¼ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        async function runSingleTest(testCase) {
            console.log(`í…ŒìŠ¤íŠ¸ ì‹¤í–‰: ${testCase.name}`);
            
            try {
                // ì…ë ¥ê°’ ì„¤ì •
                setInputValues(testCase.input);
                
                // ê³„ì‚° ì‹¤í–‰
                const vehicleData = taxCalculator.getVehicleData();
                const calculatedTaxes = taxCalculator.calculateAllTaxes(vehicleData);
                
                // ê²°ê³¼ ê²€ì¦
                const validationResult = validateResults(calculatedTaxes, testCase.expected, testCase.input);
                
                return {
                    name: testCase.name,
                    description: testCase.description,
                    input: testCase.input,
                    expected: testCase.expected,
                    actual: calculatedTaxes,
                    validation: validationResult,
                    success: validationResult.success,
                    message: validationResult.message
                };
                
            } catch (error) {
                console.error(`í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${testCase.name}`, error);
                return {
                    name: testCase.name,
                    description: testCase.description,
                    input: testCase.input,
                    expected: testCase.expected,
                    actual: null,
                    validation: { success: false, message: `í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜: ${error.message}` },
                    success: false,
                    message: `í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜: ${error.message}`
                };
            }
        }

        // ì…ë ¥ê°’ ì„¤ì • í•¨ìˆ˜
        function setInputValues(input) {
            // DOM ìš”ì†Œê°€ ì—†ìœ¼ë©´ ê°€ìƒìœ¼ë¡œ ìƒì„±
            if (!document.getElementById('carName')) {
                createMockInputElements();
            }
            
            document.getElementById('carName').value = input.carName || '';
            document.getElementById('carPrice').value = input.carPrice || 0;
            document.getElementById('displacement').value = input.displacement || 0;
            document.getElementById('carAge').value = input.carAge || 0;
            document.getElementById('vehicleType').value = input.vehicleType || 'passenger';
            document.getElementById('vehicleUse').value = input.vehicleUse || 'private';
            document.getElementById('fuelType').value = input.fuelType || 'gasoline';
            document.getElementById('seatingCapacity').value = input.seatingCapacity || '1-6';
            
            // í• ì¸ ì˜µì…˜ ì„¤ì •
            document.getElementById('individualTaxDiscount').checked = input.discounts.individualTaxDiscount || false;
            document.getElementById('oldCarDiscount').checked = input.discounts.oldCar || false;
            document.getElementById('disabledDiscount').checked = input.discounts.disabled || false;
            document.getElementById('veteranDiscount').checked = input.discounts.veteran || false;
            document.getElementById('multiChild2').checked = input.discounts.multiChild2 || false;
            document.getElementById('multiChild3').checked = input.discounts.multiChild3 || false;
            
            // ë¼ë””ì˜¤ ë²„íŠ¼ ì²˜ë¦¬
            if (input.discounts.disabled) {
                document.getElementById('disabledDiscount').checked = true;
            } else if (input.discounts.veteran) {
                document.getElementById('veteranDiscount').checked = true;
            } else if (input.discounts.multiChild2) {
                document.getElementById('multiChild2').checked = true;
            } else if (input.discounts.multiChild3) {
                document.getElementById('multiChild3').checked = true;
            } else {
                document.getElementById('acquisitionNone').checked = true;
            }
        }

        // ê°€ìƒ ì…ë ¥ ìš”ì†Œ ìƒì„±
        function createMockInputElements() {
            const inputs = [
                { id: 'carName', type: 'text' },
                { id: 'carPrice', type: 'number' },
                { id: 'displacement', type: 'number' },
                { id: 'carAge', type: 'number' },
                { id: 'vehicleType', type: 'select' },
                { id: 'vehicleUse', type: 'select' },
                { id: 'fuelType', type: 'select' },
                { id: 'seatingCapacity', type: 'select' },
                { id: 'individualTaxDiscount', type: 'checkbox' },
                { id: 'oldCarDiscount', type: 'checkbox' },
                { id: 'disabledDiscount', type: 'radio' },
                { id: 'veteranDiscount', type: 'radio' },
                { id: 'multiChild2', type: 'radio' },
                { id: 'multiChild3', type: 'radio' },
                { id: 'acquisitionNone', type: 'radio' }
            ];
            
            inputs.forEach(input => {
                if (!document.getElementById(input.id)) {
                    const element = document.createElement(input.type === 'select' ? 'select' : 'input');
                    element.id = input.id;
                    if (input.type !== 'select') {
                        element.type = input.type;
                    }
                    element.style.display = 'none';
                    document.body.appendChild(element);
                }
            });
        }

        // ê²°ê³¼ ê²€ì¦ í•¨ìˆ˜
        function validateResults(actual, expected, input) {
            const validations = [];
            
            // ê°œë³„ì†Œë¹„ì„¸ ê²€ì¦
            if (expected.individualTaxZero) {
                const isZero = actual.individualTax === 0;
                validations.push({
                    test: 'ê°œë³„ì†Œë¹„ì„¸ ë©´ì œ',
                    expected: '0ì›',
                    actual: `${actual.individualTax}ì›`,
                    success: isZero
                });
            }
            
            if (expected.individualTaxReduced) {
                const hasReduction = actual.individualTax < (actual.purePrice * 0.05);
                validations.push({
                    test: 'ê°œë³„ì†Œë¹„ì„¸ ê°ë©´',
                    expected: 'ê°ë©´ ì ìš©',
                    actual: hasReduction ? 'ê°ë©´ ì ìš©ë¨' : 'ê°ë©´ ë¯¸ì ìš©',
                    success: hasReduction
                });
            }
            
            // ì·¨ë“ì„¸ ê²€ì¦
            if (expected.acquisitionTaxZero) {
                const isZero = actual.acquisitionTax === 0;
                validations.push({
                    test: 'ì·¨ë“ì„¸ ë©´ì œ',
                    expected: '0ì›',
                    actual: `${actual.acquisitionTax}ì›`,
                    success: isZero
                });
            }
            
            if (expected.acquisitionTaxReduced) {
                const hasReduction = actual.acquisitionTax < (actual.taxBase * 0.07);
                validations.push({
                    test: 'ì·¨ë“ì„¸ ê°ë©´',
                    expected: 'ê°ë©´ ì ìš©',
                    actual: hasReduction ? 'ê°ë©´ ì ìš©ë¨' : 'ê°ë©´ ë¯¸ì ìš©',
                    success: hasReduction
                });
            }
            
            // ìë™ì°¨ì„¸ ê²€ì¦
            if (expected.annualTaxFlat) {
                const isFlat = (input.fuelType === 'electric' && actual.annualTax === 130000) ||
                              (input.fuelType === 'hydrogen' && actual.annualTax === 130000);
                validations.push({
                    test: 'ìë™ì°¨ì„¸ ì •ì•¡',
                    expected: '130,000ì›',
                    actual: `${actual.annualTax}ì›`,
                    success: isFlat
                });
            }
            
            // ê°ë©´ í•œë„ ê²€ì¦
            if (expected.individualTaxHasLimit) {
                const electricLimit = 3000000;
                const hydrogenLimit = 4000000;
                const maxDiscount = input.fuelType === 'electric' ? electricLimit : hydrogenLimit;
                
                const originalTax = actual.purePrice * 0.05;
                const actualDiscount = originalTax - actual.individualTax;
                const withinLimit = actualDiscount <= maxDiscount;
                
                validations.push({
                    test: 'ê°ë©´ í•œë„ ì ìš©',
                    expected: `ìµœëŒ€ ${maxDiscount.toLocaleString()}ì›`,
                    actual: `${actualDiscount.toLocaleString()}ì› ê°ë©´`,
                    success: withinLimit
                });
            }
            
            // ì „ì²´ ì„±ê³µ ì—¬ë¶€
            const allSuccess = validations.every(v => v.success);
            
            return {
                success: allSuccess,
                message: allSuccess ? 'ëª¨ë“  ê²€ì¦ í†µê³¼' : 'ì¼ë¶€ ê²€ì¦ ì‹¤íŒ¨',
                validations: validations
            };
        }

        // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
        function updateProgressBar() {
            const progress = ((currentTestIndex + 1) / testCases.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
        }

        // í…ŒìŠ¤íŠ¸ ê²°ê³¼ í‘œì‹œ
        function displayTestResult(result) {
            const resultsContainer = document.getElementById('testResults');
            
            const testDiv = document.createElement('div');
            testDiv.className = `test-case ${result.success ? 'success' : 'error'}`;
            
            testDiv.innerHTML = `
                <h3>${result.name}</h3>
                <p>${result.description}</p>
                <div class="test-input">
                    <strong>ì…ë ¥:</strong> ${formatInput(result.input)}
                </div>
                <div class="test-result">
                    <strong>ê²°ê³¼:</strong> <span class="${result.success ? 'success' : 'error'}">${result.message}</span>
                </div>
                ${result.validation.validations ? formatValidations(result.validation.validations) : ''}
            `;
            
            resultsContainer.appendChild(testDiv);
        }

        // ì…ë ¥ê°’ í¬ë§·íŒ…
        function formatInput(input) {
            return `${input.carName} (${input.carPrice.toLocaleString()}ì›, ${input.displacement}cc, ${input.carAge}ë…„ì°¨, ${input.vehicleType}, ${input.fuelType})`;
        }

        // ê²€ì¦ ê²°ê³¼ í¬ë§·íŒ…
        function formatValidations(validations) {
            return validations.map(v => `
                <div style="margin: 5px 0; padding: 5px; border-left: 3px solid ${v.success ? '#4CAF50' : '#f44336'};">
                    <strong>${v.test}:</strong> 
                    ê¸°ëŒ€ê°’: ${v.expected}, 
                    ì‹¤ì œê°’: ${v.actual}
                    <span class="${v.success ? 'success' : 'error'}">${v.success ? 'âœ“' : 'âœ—'}</span>
                </div>
            `).join('');
        }

        // ìš”ì•½ í‘œì‹œ
        function displaySummary() {
            const totalTests = testResults.length;
            const passedTests = testResults.filter(r => r.success).length;
            const failedTests = totalTests - passedTests;
            
            const summaryDiv = document.getElementById('testSummary');
            const summaryContent = document.getElementById('summaryContent');
            
            summaryContent.innerHTML = `
                <div style="display: flex; justify-content: space-between; margin: 10px 0;">
                    <div>
                        <h3>ğŸ“Š ì „ì²´ í…ŒìŠ¤íŠ¸ ê²°ê³¼</h3>
                        <p><strong>ì´ í…ŒìŠ¤íŠ¸:</strong> ${totalTests}ê°œ</p>
                        <p><strong>ì„±ê³µ:</strong> <span class="success">${passedTests}ê°œ</span></p>
                        <p><strong>ì‹¤íŒ¨:</strong> <span class="error">${failedTests}ê°œ</span></p>
                        <p><strong>ì„±ê³µë¥ :</strong> ${((passedTests / totalTests) * 100).toFixed(1)}%</p>
                    </div>
                    <div>
                        <h3>ğŸ¯ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€</h3>
                        <ul>
                            <li>ê¸°ë³¸ ì„¸ê¸ˆ ê³„ì‚° âœ“</li>
                            <li>ì „ê¸°ì°¨/ìˆ˜ì†Œì „ê¸°ì°¨ ê°ë©´ âœ“</li>
                            <li>ê²½ì°¨ ê°ë©´ âœ“</li>
                            <li>ì¥ì• ì¸/êµ­ê°€ìœ ê³µì ë©´ì œ âœ“</li>
                            <li>ë‹¤ìë…€ ê°ë©´ âœ“</li>
                            <li>ë…¸í›„ì°¨ëŸ‰ ê°ë©´ âœ“</li>
                            <li>1000cc ì´í•˜ ë¹„ê³¼ì„¸ âœ“</li>
                            <li>ì´ë¥œì°¨ íŠ¹ë³„ ê³„ì‚° âœ“</li>
                            <li>ê°ë©´ í•œë„ ì ìš© âœ“</li>
                        </ul>
                    </div>
                </div>
            `;
            
            summaryDiv.style.display = 'block';
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ
        window.onload = function() {
            // ë©”ì¸ ê³„ì‚°ê¸° ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ
            const script = document.createElement('script');
            script.src = './scripts/main.js';
            script.onload = function() {
                console.log('ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì™„ë£Œ');
                document.querySelector('.run-tests-btn').disabled = false;
            };
            script.onerror = function() {
                console.error('ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì‹¤íŒ¨');
                document.querySelector('.run-tests-btn').innerHTML = 'ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì‹¤íŒ¨';
                document.querySelector('.run-tests-btn').disabled = true;
            };
            document.head.appendChild(script);
        };
    </script>
</body>
</html> 